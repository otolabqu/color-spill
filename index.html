<canvas id="canvas2" width="100" height="100" style="image-rendering: pixelated;"></canvas>

<script>

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
    var canvas2 = document.getElementById('canvas2');
    var ctx2 = canvas2.getContext('2d');

    ctx2.fillStyle ="#ffffff"
    ctx2.fillRect(0,0,100,100)
 
    async function hej() {
        for (let d = 10; d<40; d+=1) {
        await sleep(100)
        let im = ctx2.getImageData(50-d, 50-d, 2*d, 2*d);
        let dat = im.data
        for (let i = 0;; i+=4) {
            if (dat[i] === undefined) {
                break
            }
            dat[i] = Math.max(dat[i]-3, 0)
    }
        ctx2.putImageData(im, 50-d, 50-d)  
    }

    }
    
    hej()
</script>
